import { test, expect } from "@playwright/test";
import { FormsPage } from "../pages/FormsPage";

/**
 * üéØ –¢–ï–°–¢–´ –§–û–†–ú –ò INPUTS
 *
 * –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º:
 * - –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
 * - –†–∞–±–æ—Ç—É —Ä–∞–∑–ª–∏—á–Ω—ã—Ö input –ø–æ–ª–µ–π
 * - –í—ã–±–æ—Ä –∏–∑ dropdown —Å–ø–∏—Å–∫–æ–≤
 * - –†–∞–±–æ—Ç—É —á–µ–∫–±–æ–∫—Å–æ–≤
 * - –í–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–æ—Ä–º
 *
 * URL: https://testingit.ru/forms
 */

test.describe("üìù –§–æ—Ä–º—ã –∏ Inputs", () => {
  /**
   * –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   *
   * –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º:
   * - –í–∏–¥–∏–º–æ—Å—Ç—å –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã
   * - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π (username, email, password)
   * - –†–∞–±–æ—Ç—É –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞–Ω (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)
   * - –†–∞–±–æ—Ç—É —á–µ–∫–±–æ–∫—Å–∞ (–æ—Ç–º–µ—Ç–∏—Ç—å/—Å–Ω—è—Ç—å/–æ—Ç–º–µ—Ç–∏—Ç—å —Å–Ω–æ–≤–∞)
   * - –£—Å–ø–µ—à–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã
   * - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   */
  test("–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏", async ({ page }) => {
    const formsPage = new FormsPage(page);

    console.log("üöÄ –ù–∞—á–∏–Ω–∞—é –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏");
    console.log("=".repeat(60));

    // ============================================================
    // –ë–õ–û–ö 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ñ–æ—Ä–º—ã
    // ============================================================
    console.log("\nüìñ –ë–õ–û–ö 1: –û—Ç–∫—Ä—ã—Ç–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ñ–æ—Ä–º—ã");
    await formsPage.goto();

    console.log("  üîç –ü—Ä–æ–≤–µ—Ä—è—é –≤–∏–¥–∏–º–æ—Å—Ç—å –≤—Å–µ—Ö –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã...");
    await expect(formsPage.usernameInput).toBeVisible();
    console.log("    ‚úÖ –ü–æ–ª–µ Username –≤–∏–¥–Ω–æ");
    await expect(formsPage.emailInput).toBeVisible();
    console.log("    ‚úÖ –ü–æ–ª–µ Email –≤–∏–¥–Ω–æ");
    await expect(formsPage.passwordInput).toBeVisible();
    console.log("    ‚úÖ –ü–æ–ª–µ Password –≤–∏–¥–Ω–æ");
    await expect(formsPage.countrySelect).toBeVisible();
    console.log("    ‚úÖ –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ Country –≤–∏–¥–Ω–æ");
    await expect(formsPage.termsCheckbox).toBeVisible();
    console.log("    ‚úÖ –ß–µ–∫–±–æ–∫—Å Terms –≤–∏–¥–Ω–æ");
    await expect(formsPage.submitButton).toBeVisible();
    console.log("    ‚úÖ –ö–Ω–æ–ø–∫–∞ Submit –≤–∏–¥–Ω–∞");

    // ============================================================
    // –ë–õ–û–ö 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞–Ω
    // ============================================================
    console.log("\nüåç –ë–õ–û–ö 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞–Ω");
    const countries = ["–†–æ—Å—Å–∏—è", "–°–®–ê", "–ì–µ—Ä–º–∞–Ω–∏—è", "–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è"];

    for (const country of countries) {
      await formsPage.countrySelect.selectOption({ label: country });
      const selectedValue = await formsPage.countrySelect.inputValue();
      console.log(
        `  ‚úÖ –°—Ç—Ä–∞–Ω–∞ "${country}" —É—Å–ø–µ—à–Ω–æ –≤—ã–±—Ä–∞–Ω–∞ (value: ${selectedValue})`
      );
    }

    // ============================================================
    // –ë–õ–û–ö 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —á–µ–∫–±–æ–∫—Å–∞
    // ============================================================
    console.log("\n‚òëÔ∏è  –ë–õ–û–ö 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —á–µ–∫–±–æ–∫—Å–∞ —Å–æ–≥–ª–∞—Å–∏—è —Å —É—Å–ª–æ–≤–∏—è–º–∏");

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    const initialState = await formsPage.termsCheckbox.isChecked();
    console.log(
      `  üìã –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ–∫–±–æ–∫—Å–∞: ${
        initialState ? "–æ—Ç–º–µ—á–µ–Ω" : "–Ω–µ –æ—Ç–º–µ—á–µ–Ω"
      }`
    );

    // –û—Ç–º–µ—á–∞–µ–º —á–µ–∫–±–æ–∫—Å
    await formsPage.termsCheckbox.check();
    await expect(formsPage.termsCheckbox).toBeChecked();
    console.log("  ‚úÖ –ß–µ–∫–±–æ–∫—Å —É—Å–ø–µ—à–Ω–æ –æ—Ç–º–µ—á–µ–Ω");

    // –°–Ω–∏–º–∞–µ–º —á–µ–∫–±–æ–∫—Å
    await formsPage.termsCheckbox.uncheck();
    await expect(formsPage.termsCheckbox).not.toBeChecked();
    console.log("  ‚úÖ –ß–µ–∫–±–æ–∫—Å —É—Å–ø–µ—à–Ω–æ —Å–Ω—è—Ç");

    // –û—Ç–º–µ—á–∞–µ–º —Å–Ω–æ–≤–∞ –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
    await formsPage.termsCheckbox.check();
    await expect(formsPage.termsCheckbox).toBeChecked();
    console.log("  ‚úÖ –ß–µ–∫–±–æ–∫—Å —Å–Ω–æ–≤–∞ –æ—Ç–º–µ—á–µ–Ω –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã");

    // ============================================================
    // –ë–õ–û–ö 4: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π –∏ –≤—ã–±–æ—Ä —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω—ã
    // ============================================================
    console.log("\n‚úèÔ∏è  –ë–õ–û–ö 4: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã —Ñ–∏–Ω–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏");

    const testData = {
      username: "qa_tester_2026",
      email: "qa.tester@testingit.ru",
      password: "SecureP@ss123!",
      country: "–†–æ—Å—Å–∏—è",
      acceptTerms: true,
    };

    console.log(`  üìù –î–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:`);
    console.log(`     Username: ${testData.username}`);
    console.log(`     Email: ${testData.email}`);
    console.log(`     Password: ${"*".repeat(testData.password.length)}`);
    console.log(`     Country: ${testData.country}`);
    console.log(`     Accept Terms: ${testData.acceptTerms}`);

    // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è
    await formsPage.usernameInput.fill(testData.username);
    console.log("  ‚úÖ Username –∑–∞–ø–æ–ª–Ω–µ–Ω");

    await formsPage.emailInput.fill(testData.email);
    console.log("  ‚úÖ Email –∑–∞–ø–æ–ª–Ω–µ–Ω");

    await formsPage.passwordInput.fill(testData.password);
    console.log("  ‚úÖ Password –∑–∞–ø–æ–ª–Ω–µ–Ω");

    await formsPage.countrySelect.selectOption({ label: testData.country });
    console.log("  ‚úÖ –°—Ç—Ä–∞–Ω–∞ –≤—ã–±—Ä–∞–Ω–∞");

    // ============================================================
    // –ë–õ–û–ö 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
    // ============================================================
    console.log("\nüîç –ë–õ–û–ö 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö");

    await expect(formsPage.usernameInput).toHaveValue(testData.username);
    console.log("  ‚úÖ Username –∑–∞–ø–æ–ª–Ω–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ");

    await expect(formsPage.emailInput).toHaveValue(testData.email);
    console.log("  ‚úÖ Email –∑–∞–ø–æ–ª–Ω–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ");

    await expect(formsPage.passwordInput).toHaveValue(testData.password);
    console.log("  ‚úÖ Password –∑–∞–ø–æ–ª–Ω–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ");

    await expect(formsPage.termsCheckbox).toBeChecked();
    console.log("  ‚úÖ –ß–µ–∫–±–æ–∫—Å –æ—Ç–º–µ—á–µ–Ω");

    // ============================================================
    // –ë–õ–û–ö 6: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    // ============================================================
    console.log("\nüì§ –ë–õ–û–ö 6: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞");

    await formsPage.submitForm();
    console.log("  ‚è≥ –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞, –æ–∂–∏–¥–∞—é –æ—Ç–≤–µ—Ç...");

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
    await expect(formsPage.successMessage).toBeVisible();
    console.log("  ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–æ—è–≤–∏–ª–æ—Å—å!");

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
    const pageContent = await page.textContent("body");

    if (pageContent?.includes(testData.username)) {
      console.log(`  ‚úÖ Username "${testData.username}" –Ω–∞–π–¥–µ–Ω –≤ –æ—Ç–≤–µ—Ç–µ`);
    }

    if (pageContent?.includes(testData.email)) {
      console.log(`  ‚úÖ Email "${testData.email}" –Ω–∞–π–¥–µ–Ω –≤ –æ—Ç–≤–µ—Ç–µ`);
    }

    // –ñ–¥–µ–º –ø–æ—è–≤–ª–µ–Ω–∏—è –±–ª–æ–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏ –¥–µ–ª–∞–µ–º –≤–∏–∑—É–∞–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É
    await expect(formsPage.resultBlock).toBeVisible();

    // –í–∏–∑—É–∞–ª—å–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —ç—Ç–∞–ª–æ–Ω–æ–º
    await expect(formsPage.resultBlock).toHaveScreenshot(
      "form-complete-result.png",
      {
        maxDiffPixels: 100, // –î–æ–ø—É—Å—Ç–∏–º–æ –¥–æ 100 –æ—Ç–ª–∏—á–∞—é—â–∏—Ö—Å—è –ø–∏–∫—Å–µ–ª–µ–π
      }
    );
    console.log("  üì∏ –í–∏–∑—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞");

    console.log("\n" + "=".repeat(60));
    console.log(
      "‚úÖ –¢–ï–°–¢ –ü–†–û–ô–î–ï–ù: –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!"
    );
    console.log("   - –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤–∏–¥–Ω—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã");
    console.log("   - –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç");
    console.log("   - –ß–µ–∫–±–æ–∫—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ");
    console.log("   - –í—Å–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ");
    console.log("   - –§–æ—Ä–º–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è");
    console.log("   - –î–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è");
    console.log("=".repeat(60));
  });
  /**
   * –¢–µ—Å—Ç –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è: –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã –±–µ–∑ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
   *
   * –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º:
   * - –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –¥–∞–∂–µ —Å –ø—É—Å—Ç—ã–º–∏ –ø–æ–ª—è–º–∏
   * - –í –æ—Ç–≤–µ—Ç–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –Ω–µ–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
   * - –î–∞–Ω–Ω—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
   */
  test("–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–µ–∑ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–ª–µ–π", async ({ page }) => {
    const formsPage = new FormsPage(page);

    console.log("üöÄ –ù–∞—á–∏–Ω–∞—é —Ç–µ—Å—Ç: –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—É—Å—Ç–æ–π —Ñ–æ—Ä–º—ã");
    console.log("=".repeat(60));

    // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
    console.log("\nüìñ –®–∞–≥ 1: –û—Ç–∫—Ä—ã–≤–∞—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å —Ñ–æ—Ä–º–æ–π");
    await formsPage.goto();

    // –ù–ï –∑–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è - –æ—Å—Ç–∞–≤–ª—è–µ–º –∏—Ö –ø—É—Å—Ç—ã–º–∏
    console.log("\n‚ö†Ô∏è  –®–∞–≥ 2: –û—Å—Ç–∞–≤–ª—è—é –≤—Å–µ –ø–æ–ª—è –ø—É—Å—Ç—ã–º–∏ (–Ω–µ –∑–∞–ø–æ–ª–Ω—è—é —Ñ–æ—Ä–º—É)");
    console.log("  üìù Username: (–ø—É—Å—Ç–æ)");
    console.log("  üìù Email: (–ø—É—Å—Ç–æ)");
    console.log("  üìù Password: (–ø—É—Å—Ç–æ)");
    console.log("  üìù Country: (–Ω–µ –≤—ã–±—Ä–∞–Ω–∞)");
    console.log("  üìù Terms: (–Ω–µ –æ—Ç–º–µ—á–µ–Ω)");

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—É—Å—Ç—É—é —Ñ–æ—Ä–º—É
    console.log("\nüì§ –®–∞–≥ 3: –û—Ç–ø—Ä–∞–≤–ª—è—é –ø—É—Å—Ç—É—é —Ñ–æ—Ä–º—É");
    await formsPage.submitForm();

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ñ–æ—Ä–º–∞ –≤—Å–µ —Ä–∞–≤–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏–ª–∞—Å—å
    console.log("\n‚úÖ –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—è—é, —á—Ç–æ —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞");
    await expect(formsPage.successMessage).toBeVisible();
    console.log("  ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–æ—è–≤–∏–ª–æ—Å—å");

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    console.log("\nüîç –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—è—é –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ");
    const pageContent = await page.textContent("body");

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    if (pageContent) {
      console.log("  üìä –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Ç–≤–µ—Ç–∞:");

      // –ò—â–µ–º JSON —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ –æ—Ç–≤–µ—Ç–µ
      const dataMatch = pageContent.match(/–î–∞–Ω–Ω—ã–µ:\s*(\{[^}]+\})/);
      if (dataMatch) {
        const dataString = dataMatch[1];
        console.log(`  ${dataString}`);

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ username –ø—É—Å—Ç–æ–π
        if (
          dataString.includes('"username": ""') ||
          dataString.includes('"username":""')
        ) {
          console.log("  ‚úÖ Username –ø—É—Å—Ç–æ–π");
        } else {
          console.log("  ‚ö†Ô∏è  Username —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ");
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ email –ø—É—Å—Ç–æ–π
        if (
          dataString.includes('"email": ""') ||
          dataString.includes('"email":""')
        ) {
          console.log("  ‚úÖ Email –ø—É—Å—Ç–æ–π");
        } else {
          console.log("  ‚ö†Ô∏è  Email —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ");
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ password –ø—É—Å—Ç–æ–π
        if (
          dataString.includes('"password": ""') ||
          dataString.includes('"password":""')
        ) {
          console.log("  ‚úÖ Password –ø—É—Å—Ç–æ–π");
        } else {
          console.log("  ‚ö†Ô∏è  Password —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ");
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º country
        const countryMatch = dataString.match(/"country":\s*"([^"]*)"/);
        if (countryMatch) {
          const countryValue = countryMatch[1];
          console.log(
            `  üìç Country: "${countryValue}" ${
              countryValue === "" ? "(–ø—É—Å—Ç–æ ‚úÖ)" : ""
            }`
          );
        }
      }
    }

    // –ñ–¥–µ–º –ø–æ—è–≤–ª–µ–Ω–∏—è –±–ª–æ–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏ –¥–µ–ª–∞–µ–º –≤–∏–∑—É–∞–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É
    await expect(formsPage.resultBlock).toBeVisible();

    // –í–∏–∑—É–∞–ª—å–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —ç—Ç–∞–ª–æ–Ω–æ–º
    await expect(formsPage.resultBlock).toHaveScreenshot(
      "form-empty-result.png",
      {
        maxDiffPixels: 100, // –î–æ–ø—É—Å—Ç–∏–º–æ –¥–æ 100 –æ—Ç–ª–∏—á–∞—é—â–∏—Ö—Å—è –ø–∏–∫—Å–µ–ª–µ–π
      }
    );
    console.log(
      "\nüì∏ –í–∏–∑—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø—É—Å—Ç–æ–π —Ñ–æ—Ä–º—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∞"
    );

    console.log("\n" + "=".repeat(60));
    console.log("‚úÖ –¢–ï–°–¢ –ü–†–û–ô–î–ï–ù: –ü—É—Å—Ç–∞—è —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å –ø—É—Å—Ç—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏!");
    console.log("=".repeat(60));
  });
});
