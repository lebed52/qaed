# üé¨ –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å Trace —Å–æ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞–º–∏

Trace Viewer - —ç—Ç–æ **"–º–∞—à–∏–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏"** –¥–ª—è —Ç–≤–æ–∏—Ö —Ç–µ—Å—Ç–æ–≤! –û–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–∞ —Å:
- üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç–∞–º–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ
- üåê DOM —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- üìä Network –∑–∞–ø—Ä–æ—Å–∞–º–∏
- üìù Console –ª–æ–≥–∞–º–∏
- ‚è±Ô∏è –í—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

## üéØ –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ HTML –æ—Ç—á—ë—Ç (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π HTML –æ—Ç—á—ë—Ç
```bash
cd /Users/s-lebedev/qaed/AQA_lesson/my_first_autotest
npm run report
```

### –®–∞–≥ 2: –í –±—Ä–∞—É–∑–µ—Ä–µ
1. –û—Ç–∫—Ä–æ–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –æ—Ç—á—ë—Ç–æ–º
2. –ö–ª–∏–∫–Ω–∏ –Ω–∞ **–ª—é–±–æ–π —Ç–µ—Å—Ç** (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–û—Ç–∫—Ä—ã—Ç–∏–µ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã QA Sandbox")
3. –£–≤–∏–¥–∏—à—å –¥–µ—Ç–∞–ª–∏ —Ç–µ—Å—Ç–∞
4. –ù–∞–∂–º–∏ –Ω–∞ **"Trace"** –∏–ª–∏ –∏–∫–æ–Ω–∫—É üé¨
5. –û—Ç–∫—Ä–æ–µ—Ç—Å—è Trace Viewer!

**–ß—Ç–æ —Ç—ã —É–≤–∏–¥–∏—à—å:**
- ‚è±Ô∏è Timeline - –≤—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ
- üéØ –õ–æ–∫–∞—Ç–æ—Ä—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- üìä Network –≤–∫–ª–∞–¥–∫–∞ —Å –∑–∞–ø—Ä–æ—Å–∞–º–∏
- üìù Console –≤–∫–ª–∞–¥–∫–∞ —Å –ª–æ–≥–∞–º–∏
- üå≥ DOM snapshot –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ

---

## üéØ –°–ø–æ—Å–æ–± 2: –ù–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É

### –û—Ç–∫—Ä—ã—Ç—å trace –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞:

```bash
cd /Users/s-lebedev/qaed/AQA_lesson/my_first_autotest

# –ü—Ä–∏–º–µ—Ä: –æ—Ç–∫—Ä—ã—Ç—å trace –ø–µ—Ä–≤–æ–≥–æ —Ç–µ—Å—Ç–∞
npx playwright show-trace "test-results/qa-sandbox-üé≠-–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-774bd-–≥–ª–∞–≤–Ω–æ–π-—Å—Ç—Ä–∞–Ω–∏—Ü—ã-QA-Sandbox-chromium/trace.zip"
```

### –ò–ª–∏ –Ω–∞–π—Ç–∏ –≤—Å–µ trace —Ñ–∞–π–ª—ã:

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ trace —Ñ–∞–π–ª—ã
find test-results -name "trace.zip"

# –û—Ç–∫—Ä—ã—Ç—å –ø–µ—Ä–≤—ã–π –Ω–∞–π–¥–µ–Ω–Ω—ã–π trace
npx playwright show-trace $(find test-results -name "trace.zip" | head -1)
```

---

## üéØ –°–ø–æ—Å–æ–± 3: UI Mode (–°–ê–ú–´–ô –ö–†–£–¢–û–ô!)

UI Mode - —ç—Ç–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º —Å trace –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!

```bash
cd /Users/s-lebedev/qaed/AQA_lesson/my_first_autotest
npm run test:ui
```

**–ß—Ç–æ —Ç—ã –ø–æ–ª—É—á–∏—à—å:**
1. –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
2. –ö–ª–∏–∫–∞–µ—à—å –Ω–∞ —Ç–µ—Å—Ç ‚Üí –æ–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
3. –í–∏–¥–∏—à—å **trace –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**
4. –ú–æ–∂–µ—à—å –ø–µ—Ä–µ–º–∞—Ç—ã–≤–∞—Ç—å –Ω–∞–∑–∞–¥/–≤–ø–µ—Ä—ë–¥
5. –ú–æ–∂–µ—à—å –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ—Å—Ç –∏ —Å—Ä–∞–∑—É –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å

---

## üì∏ –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç Trace Viewer?

### 1. **Timeline (–í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞)**
```
[0.5s] ‚îÄ‚îÄ‚îÄ page.goto('https://testingit.ru/')
[1.2s] ‚îÄ‚îÄ‚îÄ expect(element).toBeVisible()
[1.5s] ‚îÄ‚îÄ‚îÄ page.click('button')
[2.0s] ‚îÄ‚îÄ‚îÄ expect(page).toHaveURL(/alerts/)
```

### 2. **Screenshots (–°–∫—Ä–∏–Ω—à–æ—Ç—ã)**
- –°–∫—Ä–∏–Ω—à–æ—Ç **–î–û** –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
- –°–∫—Ä–∏–Ω—à–æ—Ç **–ü–û–°–õ–ï** –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
- –ú–æ–∂–Ω–æ –∫–ª–∏–∫–∞—Ç—å –ø–æ timeline –∏ –≤–∏–¥–µ—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 3. **Actions (–î–µ–π—Å—Ç–≤–∏—è)**
```
‚úì page.goto('https://testingit.ru/')
‚úì locator('h1').textContent()
‚úì expect(locator).toBeVisible()
‚úì page.getByRole('link', { name: /alerts/i }).click()
```

### 4. **Network (–°–µ—Ç—å)**
- –í—Å–µ HTTP –∑–∞–ø—Ä–æ—Å—ã
- –°—Ç–∞—Ç—É—Å—ã –æ—Ç–≤–µ—Ç–æ–≤ (200, 404, 500...)
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤

### 5. **Console (–ö–æ–Ω—Å–æ–ª—å)**
- –í—Å–µ console.log –∏–∑ —Ç–µ—Å—Ç–∞
- –û—à–∏–±–∫–∏ JavaScript
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

### 6. **Source (–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥)**
- –ö–æ–¥ —Ç–µ—Å—Ç–∞
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —à–∞–≥–∞

---

## üé¨ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Trace Viewer

### 1. –ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç—ã:
```bash
npm test
```

### 2. –û—Ç–∫—Ä–æ–π –æ—Ç—á—ë—Ç:
```bash
npm run report
```

### 3. –í –±—Ä–∞—É–∑–µ—Ä–µ:
- –ö–ª–∏–∫–Ω–∏ –Ω–∞ —Ç–µ—Å—Ç "–û—Ç–∫—Ä—ã—Ç–∏–µ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã QA Sandbox"
- –ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É **"Trace"** üé¨
- –û—Ç–∫—Ä–æ–µ—Ç—Å—è Trace Viewer

### 4. –ò—Å—Å–ª–µ–¥—É–π:
- **–ö–ª–∏–∫–∞–π –ø–æ timeline** - —É–≤–∏–¥–∏—à—å —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞
- **–ù–∞–≤–µ–¥–∏ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç—ã** - —É–≤–∏–¥–∏—à—å –∏—Ö –ª–æ–∫–∞—Ç–æ—Ä—ã
- **–û—Ç–∫—Ä–æ–π Network** - –ø–æ—Å–º–æ—Ç—Ä–∏ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã
- **–û—Ç–∫—Ä–æ–π Console** - —É–≤–∏–¥–∏—à—å —Å–≤–æ–∏ console.log()

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ trace –≤ playwright.config.ts

```typescript
use: {
  // –í–∞—Ä–∏–∞–Ω—Ç—ã –∑–∞–ø–∏—Å–∏ trace:
  
  trace: 'on',                    // –í—Å–µ–≥–¥–∞ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å (–¥–ª—è –æ–±—É—á–µ–Ω–∏—è)
  trace: 'off',                   // –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å
  trace: 'retain-on-failure',     // –¢–æ–ª—å–∫–æ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ —Ç–µ—Å—Ç–∞
  trace: 'on-first-retry',        // –ü—Ä–∏ –ø–µ—Ä–≤–æ–π –ø–æ–ø—ã—Ç–∫–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
  
  screenshot: 'on',               // –°–∫—Ä–∏–Ω—à–æ—Ç—ã –≤—Å–µ–≥–¥–∞
  video: 'on',                    // –í–∏–¥–µ–æ –≤—Å–µ–≥–¥–∞
}
```

**–¢–µ–∫—É—â–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:** `trace: 'on'` - –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞!

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

### 1. –î–ª—è –æ–±—É—á–µ–Ω–∏—è
```typescript
trace: 'on',          // –í—Å–µ–≥–¥–∞ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å
screenshot: 'on',     // –í—Å–µ–≥–¥–∞ –¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç—ã
video: 'on',          // –í—Å–µ–≥–¥–∞ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤–∏–¥–µ–æ
```

### 2. –î–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
```typescript
trace: 'retain-on-failure',  // –¢–æ–ª—å–∫–æ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏
screenshot: 'only-on-failure',
video: 'retain-on-failure',
```

### 3. –î–ª—è CI/CD
```typescript
trace: 'on-first-retry',     // –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ
screenshot: 'only-on-failure',
video: 'retain-on-failure',
```

---

## üéØ –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –û—Ç–∫—Ä—ã—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π HTML –æ—Ç—á—ë—Ç
npm run report

# –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π trace
npx playwright show-trace test-results/*/trace.zip

# –ó–∞–ø—É—Å—Ç–∏—Ç—å UI Mode (–ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç!)
npm run test:ui

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å trace
npm test

# –ù–∞–π—Ç–∏ –≤—Å–µ trace —Ñ–∞–π–ª—ã
find test-results -name "trace.zip"
```

---

## üé• –ì–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Ñ–∞–π–ª—ã?

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤:

```
test-results/
‚îú‚îÄ‚îÄ qa-sandbox-...-chromium/
‚îÇ   ‚îú‚îÄ‚îÄ trace.zip           ‚Üê Trace —Ñ–∞–π–ª (–æ—Ç–∫—Ä—ã–≤–∞–π —ç—Ç–æ—Ç!)
‚îÇ   ‚îú‚îÄ‚îÄ video.webm          ‚Üê –í–∏–¥–µ–æ —Ç–µ—Å—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ test-finished-1.png ‚Üê –°–∫—Ä–∏–Ω—à–æ—Ç
‚îú‚îÄ‚îÄ qa-sandbox-...-chromium/
‚îÇ   ‚îú‚îÄ‚îÄ trace.zip
‚îÇ   ‚îú‚îÄ‚îÄ video.webm
‚îÇ   ‚îî‚îÄ‚îÄ test-finished-1.png
‚îî‚îÄ‚îÄ ...
```

---

## üöÄ –ü–æ–ø—Ä–æ–±—É–π –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!

### –í–∞—Ä–∏–∞–Ω—Ç 1: HTML –æ—Ç—á—ë—Ç
```bash
npm run report
```
‚Üí –ö–ª–∏–∫–Ω–∏ –Ω–∞ –ª—é–±–æ–π —Ç–µ—Å—Ç ‚Üí –ù–∞–∂–º–∏ "Trace" üé¨

### –í–∞—Ä–∏–∞–Ω—Ç 2: UI Mode (–†–ï–ö–û–ú–ï–ù–î–£–Æ!)
```bash
npm run test:ui
```
‚Üí –ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç ‚Üí –°–º–æ—Ç—Ä–∏ trace –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
```bash
npx playwright show-trace $(find test-results -name "trace.zip" | head -1)
```

---

## üéì –ß—Ç–æ –∏–∑—É—á–∏—Ç—å –≤ Trace Viewer?

1. **Timeline** - –ø–æ—Å–º–æ—Ç—Ä–∏, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω–∏–º–∞–µ—Ç –∫–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
2. **Screenshots** - —É–≤–∏–¥—å, –∫–∞–∫ –≤—ã–≥–ª—è–¥–µ–ª–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ
3. **Network** - –∫–∞–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –¥–µ–ª–∞–ª–∏—Å—å
4. **Console** - —Ç–≤–æ–∏ console.log() –∏ –æ—à–∏–±–∫–∏ JavaScript
5. **Source** - –∫–æ–¥ —Ç–µ—Å—Ç–∞ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Ç–µ–∫—É—â–µ–≥–æ —à–∞–≥–∞
6. **Locator** - –∫–∞–∫ Playwright –Ω–∞—à—ë–ª —ç–ª–µ–º–µ–Ω—Ç—ã

---

## üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é!

–¢–µ–ø–µ—Ä—å —Ç—ã –∑–Ω–∞–µ—à—å, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Å–∞–º—ã–π –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ—Ç–ª–∞–¥–∫–∏** –≤ Playwright!

Trace Viewer - —ç—Ç–æ —Ç–æ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç Playwright –ª—É—á—à–∏–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏! üöÄ



